<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flag Master Ultra V2</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;700;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Plus Jakarta Sans', sans-serif; background: #0f172a; color: white; }
        .glass { background: rgba(255, 255, 255, 0.03); backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.1); }
        .btn-opt { background: rgba(255, 255, 255, 0.05); transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1); border: 1px solid rgba(255, 255, 255, 0.1); }
        .btn-opt:hover:not(:disabled) { background: rgba(255, 255, 255, 0.12); transform: scale(1.02); border-color: #6366f1; }
        .correct { background: #10b981 !important; border-color: #10b981 !important; box-shadow: 0 0 20px rgba(16, 185, 129, 0.2); }
        .wrong { background: #ef4444 !important; border-color: #ef4444 !important; }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

    <div class="max-w-md w-full glass rounded-[2.5rem] overflow-hidden shadow-2xl relative">
        <div class="p-6 flex justify-between items-center border-b border-white/10">
            <div>
                <h1 class="text-xl font-800 tracking-tighter text-indigo-400">FLAG MASTER <span class="text-white">V2</span></h1>
                <p id="remaining-count" class="text-[9px] text-slate-400 font-bold uppercase tracking-widest mt-1">Sisa: - / -</p>
            </div>
            <div class="bg-indigo-500/10 px-4 py-2 rounded-2xl border border-indigo-500/20 text-center">
                <span class="block text-[8px] text-indigo-300 font-bold uppercase">Skor</span>
                <span id="score" class="text-xl font-800 text-indigo-400">0</span>
            </div>
        </div>

        <div class="p-6">
            <div class="relative mb-6 aspect-[4/3] rounded-3xl overflow-hidden bg-black/20 border border-white/5 flex items-center justify-center">
                <img id="flag-img" src="" class="max-w-[85%] max-h-[70%] shadow-2xl transition-all duration-500 opacity-0 scale-90">
                
                <div id="hint-box" class="absolute inset-0 bg-slate-900/95 flex flex-col items-center justify-center opacity-0 pointer-events-none transition-all duration-300 z-20">
                    <p class="text-slate-400 text-[10px] font-bold uppercase mb-2 italic">Petunjuk Jawaban:</p>
                    <p id="hint-text" class="text-xl font-bold text-center text-white px-4"></p>
                    <button onclick="hideHint()" class="mt-4 px-6 py-2 bg-indigo-600 rounded-full text-[10px] font-800">OK, MENGERTI</button>
                </div>
            </div>

            <div id="options-grid" class="grid grid-cols-1 gap-3"></div>

            <div class="mt-8 flex gap-3">
                <button onclick="showHint()" class="flex-1 py-4 rounded-2xl bg-white/5 text-[10px] font-bold hover:bg-white/10 transition-all">ðŸ’¡ LIHAT JAWABAN</button>
                <button onclick="newRound()" class="flex-1 py-4 rounded-2xl bg-indigo-600 text-[10px] font-bold uppercase tracking-widest hover:bg-indigo-500">Lewati â†’</button>
            </div>
        </div>
    </div>

    <script>
        let allCountries = [];
        let availableCountries = [];
        let score = 0;
        let current;

        // Ambil SEMUA bendera dari API resmi
        async function loadData() {
            try {
                const res = await fetch('https://flagcdn.com/id/codes.json');
                const data = await res.json();
                // Filter wilayah yang benderanya valid
                allCountries = Object.entries(data).map(([code, name]) => ({ code, name }));
                availableCountries = [...allCountries];
                newRound();
            } catch (e) {
                alert("Gagal memuat data. Periksa koneksi internet.");
            }
        }

        function newRound() {
            if (availableCountries.length === 0) {
                alert("Luar biasa! Semua bendera sudah kamu tebak. Permainan akan direset.");
                availableCountries = [...allCountries];
                score = 0;
                document.getElementById('score').textContent = score;
            }

            hideHint();
            // Ambil acak & hapus dari daftar (Anti-Duplikat)
            const index = Math.floor(Math.random() * availableCountries.length);
            current = availableCountries.splice(index, 1)[0];

            document.getElementById('remaining-count').textContent = `Sisa: ${availableCountries.length} / ${allCountries.length}`;
            
            const img = document.getElementById('flag-img');
            img.style.opacity = '0';
            img.src = `https://flagcdn.com/w640/${current.code}.png`;
            img.onload = () => img.style.opacity = '1';

            // Pilihan jawaban acak
            let choices = [current.name];
            while (choices.length < 4) {
                let random = allCountries[Math.floor(Math.random() * allCountries.length)].name;
                if (!choices.includes(random)) choices.push(random);
            }
            choices.sort(() => Math.random() - 0.5);

            const grid = document.getElementById('options-grid');
            grid.innerHTML = '';
            choices.forEach(opt => {
                const b = document.createElement('button');
                b.className = 'btn-opt w-full p-4 rounded-2xl text-xs font-bold text-left flex justify-between items-center';
                b.innerHTML = `<span>${opt}</span><div class="w-1.5 h-1.5 rounded-full bg-white/10"></div>`;
                b.onclick = () => check(opt, b);
                grid.appendChild(b);
            });
        }

        function check(sel, btn) {
            const btns = document.querySelectorAll('.btn-opt');
            btns.forEach(b => b.disabled = true);

            if (sel === current.name) {
                score += 10;
                document.getElementById('score').textContent = score;
                btn.classList.add('correct');
                setTimeout(newRound, 800);
            } else {
                btn.classList.add('wrong');
                btns.forEach(b => {
                    if (b.innerText.trim() === current.name) b.classList.add('correct');
                });
                setTimeout(newRound, 2000);
            }
        }

        function showHint() {
            document.getElementById('hint-text').textContent = current.name;
            const h = document.getElementById('hint-box');
            h.style.opacity = '1';
            h.style.pointerEvents = 'auto';
        }

        function hideHint() {
            const h = document.getElementById('hint-box');
            h.style.opacity = '0';
            h.style.pointerEvents = 'none';
        }

        loadData();
    </script>
</body>
</html>
