<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Skizo AI - Private</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-900 text-white font-sans">
    <div class="p-4 border-b border-slate-800 bg-slate-900 sticky top-0 font-bold text-purple-400 z-10 text-center">
        SKIZO AI
    </div>

    <div id="box" class="p-4 space-y-4 overflow-y-auto pb-24" style="height: calc(100vh - 80px);">
        <div class="bg-slate-800 p-3 rounded-lg max-w-[85%] text-sm shadow-md">
            Halo! Saya Skizo AI. Sistem keamanan sudah diperbarui. Silakan tanya apa saja!
        </div>
    </div>

    <div class="fixed bottom-0 w-full p-4 bg-slate-900 border-t border-slate-800 flex gap-2">
        <input type="text" id="in" placeholder="Tulis pesan..." 
            class="flex-1 bg-slate-800 p-3 rounded-xl outline-none border border-slate-700 focus:border-purple-500 text-sm">
        <button onclick="ask()" class="bg-purple-600 px-6 py-3 rounded-xl font-bold text-sm">KIRIM</button>
    </div>

    <script>
        // PENTING: Masukkan API Key kamu yang sudah DIBALIK urutannya di sini
        // Contoh: Jika kunci aslinya "AIzaSyA", tulis di sini "AySaziA"
        const reversedKey = "QHzsCGrdsrHJYjbY71WYA9x7TMOGpzaKDySazlA";
        
        // Kode untuk mengembalikan kunci ke urutan asli saat aplikasi berjalan
        const K = reversedKey.split("").reverse().join("");

        async function ask() {
            const i = document.getElementById('in');
            const b = document.getElementById('box');
            if(!i.value.trim()) return;
            
            const p = i.value;
            b.innerHTML += `<div class="bg-purple-600 p-3 rounded-lg max-w-[85%] ml-auto text-sm shadow-md">${p}</div>`;
            
            i.value = "Berpikir...";
            i.disabled = true;
            b.scrollTop = b.scrollHeight;

            try {
                const res = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${K}`, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({ contents: [{ parts: [{ text: p }] }] })
                });
                
                const d = await res.json();
                if (d.candidates && d.candidates[0].content.parts[0].text) {
                    const txt = d.candidates[0].content.parts[0].text;
                    b.innerHTML += `<div class="bg-slate-800 p-3 rounded-lg max-w-[85%] text-sm shadow-md border border-slate-700">${txt}</div>`;
                } else {
                    throw new Error("Key ditolak");
                }
            } catch (e) {
                b.innerHTML += `<div class="bg-red-900/30 text-red-400 p-2 rounded text-xs text-center border border-red-800">Gagal menyambung. Pastikan kunci sudah dibalik dengan benar di kode.</div>`;
            }

            i.value = "";
            i.disabled = false;
            i.focus();
            b.scrollTop = b.scrollHeight;
        }

        document.getElementById('in').addEventListener('keypress', function (e) {
            if (e.key === 'Enter') ask();
        });
    </script>
</body>
</html>
